name: Sample app workflow

on: 
  #workflow_dispatch allows for manual dispatch
  workflow_dispatch:

    #this will run on push events
  push:
    branches:
      - main
      - 'feature/*'
      - production
env:
  USERNAME:  ${{ vars.USERNAME }}

   # MONGO_URI: 'mongodb+srv://supercluster.d83jj.mongodb.net/superDate'
   # MONGO_USERNAME: ${{ vars.MONGO_USERNAME }}
   # MONGO_PASSWORD: ${{ secrets.MONGO_PASSWORD }}
   
jobs: 
  hello-world:
    
    runs-on: ubuntu-latest
    steps:
      - name: checkout repo
        uses: actions/checkout@v4
      - name: Setup NodeJS v18
        uses: actions/setup-node@v3
        with:
          node-version: 22.12
          cache: 'npm'
      - run: npm ci  
      # npm ci requires packge-lock.json

      - name: Restore node_modules from cache
        uses: actions/cache@v3
        with:
          path: node_modules
           key: ${{ runner.os }}-node-${{ env.NODE_VERSION }}-${{ hashFiles('**/package-lock.json') }}
           restore-keys: |
           ${{ runner.os }}-node-${{ env.NODE_VERSION }}-

    #  - name: install dependencies
    #    run: npm install
      - name: Run npm run build, typescript -> javascript
        run: npm run build
